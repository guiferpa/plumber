hash_object() {
  local content=$@
  local header="blob ${#content}\0"
  local sha1=`printf "${header}${content}" | openssl sha1`

  echo "content: "$content
  echo "sha1: "$sha1

  local head="./.git/objects/${sha1:0:2}"
  local tail="${head}/${sha1:2}"

  mkdir -p $head
  printf "${header}${content}" | python -c "import zlib,sys; \
    print(zlib.compress(sys.stdin.read()))" >$tail
}

hash_object $1

# script:
# 00000000: 1f8b 0800 d681 fd5b 0003 4bca c94f 5230  .......[..K..OR0
# 00000010: 3463 70cb 49cc 4dcd 4bcf 5748 4ecc 2d48  4cp.I.M.K.WHN.-H
# 00000020: 4dcc 0700 6474 ac7c 1800 0000            M...dt.|....

# 00000000: 00011111 10001011 00001000 00000000 10001111 10000011  ......
# 00000006: 11111101 01011011 00000000 00000011 01001011 11001010  .[..K.
# 0000000c: 11001001 01001111 01010010 00110000 00110100 01100011  .OR04c
# 00000012: 01110000 11001011 01001001 11001100 01001101 11001101  p.I.M.
# 00000018: 01001011 11001111 01010111 01001000 01001110 11001100  K.WHN.
# 0000001e: 00101101 01001000 01001101 11001100 00000111 00000000  -HM...
# 00000024: 01100100 01110100 10101100 01111100 00011000 00000000  dt.|..
# 0000002a: 00000000 00000000

# git:
# 00000000: 1f8b 0800 d681 fd5b 0003 4bca c94f 5230  .......[..K..OR0
# 00000010: 3463 70cb 49cc 4dcd 4bcf 5748 4ecc 2d48  4cp.I.M.K.WHN.-H
# 00000020: 4dcc 0700 6474 ac7c 1800 0000            M...dt.|....

# 00000000: 01111000 00000001 01001011 11001010 11001001 01001111  x.K..O
# 00000006: 01010010 00110000 00110100 01100011 01110000 11001011  R04cp.
# 0000000c: 01001001 11001100 01001101 11001101 01001011 11001111  I.M.K.
# 00000012: 01010111 01001000 01001110 11001100 00101101 01001000  WHN.-H
# 00000018: 01001101 11001100 00000111 00000000 01100001 10101001  M...a.
# 0000001e: 00001000 01000110                                      .F
